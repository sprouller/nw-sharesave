(()=>{document.addEventListener("DOMContentLoaded",()=>{let E="savings",I="initial",h="numberOfShares",v="sharePrice",y="value",T="increase",P="change",B="profit",f="sliderVal",w="optionPrice",o=document.getElementById(E),V=document.getElementById(I),S=document.getElementById(h),C=document.getElementById(v),L=document.getElementById(y),r=document.getElementById(T),N=document.getElementById(P),_=document.getElementById(B),G=document.getElementById(f),x=document.getElementById(w),A=document.querySelectorAll('input[name="period"]'),F="https://alpha-pulse.vercel.app/api/eod?id=nwg",u=t=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),a=null,c=1.88,d=3,b=async()=>{try{let t=await fetch(F);if(!t.ok)throw new Error("Network response was not ok");return(await t.json())[0].price/100}catch(t){console.log("There was a problem with the fetch operation:",t.message)}},O=async()=>{a=await b(),a!==null&&(c=a*.8),C.textContent=u(a),x.textContent=u(c),o.addEventListener("input",()=>{let t=o.value,e=r.value;s(t,e)}),r.addEventListener("input",()=>{let t=o.value,e=r.value;s(t,e)}),A.forEach(t=>{t.addEventListener("change",function(){d=parseInt(this.value,10);let e=o.value,n=r.value;s(e,n)})})},s=(t,e)=>{let n=l=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),D=l=>new Intl.NumberFormat().format(l),i=t*12*d,m=Math.floor(i/c),g=Math.round(m*a),p=g*(1+e/100),R=p-i;V.textContent=n(i),S.textContent=D(m),L.textContent=n(g),N.textContent=n(p),_.textContent=n(R)};O(),o.addEventListener("input",t=>{let e=t.target.reportValidity();t.target.setAttribute("aria-invalid",!e)}),console.log("live")});})();
