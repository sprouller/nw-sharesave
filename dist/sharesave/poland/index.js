(()=>{document.addEventListener("DOMContentLoaded",()=>{let I="savings",h="initial",y="numberOfShares",P="sharePrice",S="value",T="increase",V="change",L="profit",f="sliderVal",b="optionPrice",w="bonusMultiple",t=document.getElementById(I),B=document.getElementById(h),N=document.getElementById(y),C=document.getElementById(P),_=document.getElementById(S),r=document.getElementById(T),x=document.getElementById(V),A=document.getElementById(L),k=document.getElementById(f),F=document.getElementById(b),H=document.getElementById(w),M=document.querySelectorAll('input[name="period"]'),O="https://alpha-pulse.vercel.app/api/eod?id=nwg",m=e=>new Intl.NumberFormat("pl-PL",{style:"currency",currency:"PLN",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),i=null,s=1.88,p=3,D=5,R=async()=>{try{let e=await fetch(O);if(!e.ok)throw new Error("Network response was not ok");return(await e.json())[0].price/100}catch(e){console.log("There was a problem with the fetch operation:",e.message)}},l=e=>e.replace(/[zÅ‚,]/g,""),U=e=>e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),X=async()=>{i=await R(),i!==null&&(convertedSharePrice=i*D,s=convertedSharePrice*.8),C.textContent=m(convertedSharePrice),F.textContent=m(s),t.addEventListener("input",()=>{t.value=U(t.value),t.value=t.value+"z\u0142";let e=l(t.value),n=r.value;u(e,n);let o=25,c=600;e<o||e>c?t.setCustomValidity(`Income must be between ${o.toLocaleString()}z\u0142 and ${c.toLocaleString()}z\u0142.`):t.setCustomValidity("");let a=t.reportValidity();t.setAttribute("aria-invalid",!a)}),r.addEventListener("input",()=>{let e=l(t.value),n=r.value;u(e,n)}),M.forEach(e=>{e.addEventListener("change",function(){p=parseInt(this.value,10);let n=l(t.value),o=r.value;u(n,o)})})},u=(e,n)=>{let o=d=>new Intl.NumberFormat("pl-PL",{style:"currency",currency:"PLN",minimumFractionDigits:0,maximumFractionDigits:0}).format(d),c=d=>new Intl.NumberFormat().format(d),a=e*12*p,g=Math.floor(a/s),v=Math.round(g*convertedSharePrice),E=v*(1+n/100),z=E-a;B.textContent=o(a),N.textContent=c(g),_.textContent=o(v),x.textContent=o(E),A.textContent=o(z)};X(),t.addEventListener("input",e=>{let n=e.target.reportValidity();e.target.setAttribute("aria-invalid",!n)}),console.log("live")});})();
