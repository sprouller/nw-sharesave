(()=>{document.addEventListener("DOMContentLoaded",()=>{let y="savings",T="initial",B="numberOfShares",f="sharePrice",P="value",S="increase",b="change",w="profit",C="sliderVal",L="optionPrice",N="bonusMultiple",n=document.getElementById(y),V=document.getElementById(T),_=document.getElementById(B),x=document.getElementById(f),M=document.getElementById(P),c=document.getElementById(S),A=document.getElementById(b),F=document.getElementById(w),q=document.getElementById(C),O=document.getElementById(L),D=document.getElementById(N),R=document.querySelectorAll('input[name="period"]'),G="https://alpha-pulse.vercel.app/api/eod?id=nwg",m=t=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),a=null,i=1.88,s=3,U=async()=>{try{let t=await fetch(G);if(!t.ok)throw new Error("Network response was not ok");return(await t.json())[0].price/100}catch(t){console.log("There was a problem with the fetch operation:",t.message)}},p=t=>t.replace(/[Â£,]/g,""),X=t=>t.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),k=async()=>{a=await U(),a!==null&&(i=a*.8),x.textContent=m(a),O.textContent=m(i),n.addEventListener("input",()=>{n.value=X(n.value),n.value="\xA3"+n.value;let t=p(n.value),e=c.value;l(t,e)}),c.addEventListener("input",()=>{let t=p(n.value),e=c.value;l(t,e)}),R.forEach(t=>{t.addEventListener("change",function(){s=parseInt(this.value,10);let e=n.value,o=c.value;l(e,o)})})},l=(t,e)=>{let o=d=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(d),H=d=>new Intl.NumberFormat().format(d),g=t*12*s,r=0,u=0;s===3?(r=1.1,u=r*t):s===5&&(r=3.2,u=r*t);let E=g+u,I=Math.floor(E/i),v=Math.round(I*a),h=v*(1+e/100),j=h-g;D.textContent=r,V.textContent=o(E),_.textContent=H(I),M.textContent=o(v),A.textContent=o(h),F.textContent=o(j)};k(),n.addEventListener("input",t=>{let e=t.target.reportValidity();t.target.setAttribute("aria-invalid",!e)}),console.log("live")});})();
