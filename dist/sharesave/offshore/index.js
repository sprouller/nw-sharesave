(()=>{document.addEventListener("DOMContentLoaded",()=>{let T="savings",f="initial",B="numberOfShares",P="sharePrice",S="value",V="increase",b="change",w="profit",C="sliderVal",L="optionPrice",N="bonusMultiple",e=document.getElementById(T),_=document.getElementById(f),x=document.getElementById(B),A=document.getElementById(P),M=document.getElementById(S),i=document.getElementById(V),F=document.getElementById(b),O=document.getElementById(w),$=document.getElementById(C),D=document.getElementById(L),R=document.getElementById(N),G=document.querySelectorAll('input[name="period"]'),U="https://alpha-pulse.vercel.app/api/eod?id=nwg",E=t=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),a=null,u=1.88,s=3,X=async()=>{try{let t=await fetch(U);if(!t.ok)throw new Error("Network response was not ok");return(await t.json())[0].price/100}catch(t){console.log("There was a problem with the fetch operation:",t.message)}},d=t=>t.replace(/[Â£,]/g,""),k=t=>t.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),H=async()=>{a=await X(),a!==null&&(u=a*.8),A.textContent=E(a),D.textContent=E(u),e.addEventListener("input",()=>{e.value=k(e.value),e.value="\xA3"+e.value;let t=d(e.value),n=i.value;m(t,n);let o=5,c=150;t<o||t>c?e.setCustomValidity(`Income must be between \xA3${o.toLocaleString()} and \xA3${c.toLocaleString()}.`):e.setCustomValidity("");let l=e.reportValidity();e.setAttribute("aria-invalid",!l)}),i.addEventListener("input",()=>{let t=d(e.value),n=i.value;m(t,n)}),G.forEach(t=>{t.addEventListener("change",function(){s=parseInt(this.value,10);let n=d(e.value),o=i.value;m(n,o)})})},m=(t,n)=>{let o=g=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),c=g=>new Intl.NumberFormat().format(g),l=t*12*s,r=0,p=0;s===3?(r=1.1,p=r*t):s===5&&(r=3.2,p=r*t);let I=l+p,v=Math.floor(I/u),y=Math.round(v*a),h=y*(1+n/100),j=h-l;R.textContent=r,_.textContent=o(I),x.textContent=c(v),M.textContent=o(y),F.textContent=o(h),O.textContent=o(j)};H(),e.addEventListener("input",t=>{let n=t.target.reportValidity();t.target.setAttribute("aria-invalid",!n)}),console.log("live")});})();
