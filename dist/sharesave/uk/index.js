(()=>{document.addEventListener("DOMContentLoaded",()=>{let T="savings",B="initial",P="numberOfShares",S="sharePrice",b="value",w="increase",_="change",C="profit",L="sliderVal",N="optionPrice",O="bonusMultiple",V="profitOver3k",n=document.getElementById(T),x=document.getElementById(B),F=document.getElementById(P),M=document.getElementById(S),A=document.getElementById(b),s=document.getElementById(w),R=document.getElementById(_),D=document.getElementById(C),z=document.getElementById(L),k=document.getElementById(N),G=document.getElementById(O),U=document.querySelectorAll('input[name="period"]'),p=document.getElementById(V),X="https://alpha-pulse.vercel.app/api/eod?id=nwg",g=t=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),r=null,i=1.88,c=3,H=async()=>{try{let t=await fetch(X);if(!t.ok)throw new Error("Network response was not ok");return(await t.json())[0].price/100}catch(t){console.log("There was a problem with the fetch operation:",t.message)}},l=t=>t.replace(/[Â£,]/g,""),j=t=>t.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),q=async()=>{r=await H(),r!==null&&(i=r*.8),M.textContent=g(r),k.textContent=g(i),n.addEventListener("input",()=>{n.value=j(n.value),n.value="\xA3"+n.value;let t=l(n.value),e=s.value;u(t,e)}),s.addEventListener("input",()=>{let t=l(n.value),e=s.value;u(t,e)}),U.forEach(t=>{t.addEventListener("change",function(){c=parseInt(this.value,10);let e=l(n.value),o=s.value;u(e,o)})})},u=(t,e)=>{let o=m=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(m),K=m=>new Intl.NumberFormat().format(m),E=t*12*c,a=0,d=0;c===3?(a=1.1,d=a*t):c===5&&(a=3.2,d=a*t);let I=E+d,y=Math.floor(I/i),v=Math.round(y*r),h=v*(1+e/100),f=h-E;f<3e3?p.style.display="none":p.style.display="block",G.textContent=a,x.textContent=o(I),F.textContent=K(y),A.textContent=o(v),R.textContent=o(h),D.textContent=o(f)};q(),n.addEventListener("input",t=>{let e=t.target.reportValidity();t.target.setAttribute("aria-invalid",!e)}),console.log("live")});})();
