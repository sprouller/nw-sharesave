(()=>{document.addEventListener("DOMContentLoaded",()=>{let B="savings",P="initial",V="numberOfShares",b="sharePrice",S="value",w="increase",C="change",L="profit",_="sliderVal",N="optionPrice",O="bonusMultiple",x="profitOver3k",e=document.getElementById(B),A=document.getElementById(P),F=document.getElementById(V),M=document.getElementById(b),R=document.getElementById(S),i=document.getElementById(w),D=document.getElementById(C),k=document.getElementById(L),K=document.getElementById(_),G=document.getElementById(N),U=document.getElementById(O),X=document.querySelectorAll('input[name="period"]'),E=document.getElementById(x),H="https://alpha-pulse.vercel.app/api/eod?id=nwg",y=t=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),a=null,u=1.88,s=3,j=async()=>{try{let t=await fetch(H);if(!t.ok)throw new Error("Network response was not ok");return(await t.json())[0].price/100}catch(t){console.log("There was a problem with the fetch operation:",t.message)}},d=t=>t.replace(/[Â£,]/g,""),$=t=>t.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),q=async()=>{a=await j(),a!==null&&(u=a*.8),M.textContent=y(a),G.textContent=y(u),e.addEventListener("input",()=>{e.value=$(e.value),e.value="\xA3"+e.value;let t=d(e.value),n=i.value;m(t,n);let o=5,c=150;t<o||t>c?e.setCustomValidity(`Income must be between \xA3${o.toLocaleString()} and \xA3${c.toLocaleString()}.`):e.setCustomValidity("");let l=e.reportValidity();e.setAttribute("aria-invalid",!l)}),i.addEventListener("input",()=>{let t=d(e.value),n=i.value;m(t,n)}),X.forEach(t=>{t.addEventListener("change",function(){s=parseInt(this.value,10);let n=d(e.value),o=i.value;m(n,o)})})},m=(t,n)=>{let o=g=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),c=g=>new Intl.NumberFormat().format(g),l=t*12*s,r=0,p=0;s===3?(r=1.1,p=r*t):s===5&&(r=3.2,p=r*t);let I=l+p,v=Math.floor(I/u),h=Math.round(v*a),f=h*(1+n/100),T=f-l;T<3e3?E.style.display="none":E.style.display="block",U.textContent=r,A.textContent=o(I),F.textContent=c(v),R.textContent=o(h),D.textContent=o(f),k.textContent=o(T)};q(),e.addEventListener("input",t=>{let n=t.target.reportValidity();t.target.setAttribute("aria-invalid",!n)}),console.log("live")});})();
