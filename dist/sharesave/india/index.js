(()=>{document.addEventListener("DOMContentLoaded",()=>{let I="savings",h="initial",y="numberOfShares",S="sharePrice",V="value",P="increase",T="change",f="profit",N="sliderVal",w="optionPrice",t=document.getElementById(I),C=document.getElementById(h),b=document.getElementById(y),B=document.getElementById(S),L=document.getElementById(V),r=document.getElementById(P),_=document.getElementById(T),x=document.getElementById(f),k=document.getElementById(N),A=document.getElementById(w),R=document.querySelectorAll('input[name="period"]'),F="https://alpha-pulse.vercel.app/api/eod?id=nwg",m=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),i=null,s=1.88,g=3,D=106,O=async()=>{try{let e=await fetch(F);if(!e.ok)throw new Error("Network response was not ok");return(await e.json())[0].price/100}catch(e){console.log("There was a problem with the fetch operation:",e.message)}},l=e=>e.replace(/[â‚¹,]/g,""),M=e=>e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),X=async()=>{i=await O(),i!==null&&(convertedSharePrice=i*D,s=convertedSharePrice*.8),B.textContent=m(convertedSharePrice),A.textContent=m(s),t.addEventListener("input",()=>{t.value=M(t.value),t.value="\u20B9"+t.value;let e=l(t.value),n=r.value;u(e,n);let o=500,c=6e3;e<o||e>c?t.setCustomValidity(`Income must be between \u20B9${o.toLocaleString()} and \u20B9${c.toLocaleString()}.`):t.setCustomValidity("");let a=t.reportValidity();t.setAttribute("aria-invalid",!a)}),r.addEventListener("input",()=>{let e=l(t.value),n=r.value;u(e,n)}),R.forEach(e=>{e.addEventListener("change",function(){g=parseInt(this.value,10);let n=l(t.value),o=r.value;u(n,o)})})},u=(e,n)=>{let o=d=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(d),c=d=>new Intl.NumberFormat().format(d),a=e*12*g,p=Math.floor(a/s),v=Math.round(p*convertedSharePrice),E=v*(1+n/100),U=E-a;C.textContent=o(a),b.textContent=c(p),L.textContent=o(v),_.textContent=o(E),x.textContent=o(U)};X(),t.addEventListener("input",e=>{let n=e.target.reportValidity();e.target.setAttribute("aria-invalid",!n)}),console.log("live")});})();
