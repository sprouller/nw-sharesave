(()=>{document.addEventListener("DOMContentLoaded",()=>{let E="savings",I="initial",h="numberOfShares",y="sharePrice",P="value",S="increase",T="change",N="profit",f="sliderVal",B="optionPrice",w="bonusMultiple",n=document.getElementById(E),V=document.getElementById(I),L=document.getElementById(h),b=document.getElementById(y),C=document.getElementById(P),r=document.getElementById(S),_=document.getElementById(T),R=document.getElementById(N),H=document.getElementById(f),x=document.getElementById(B),G=document.getElementById(w),A=document.querySelectorAll('input[name="period"]'),F="https://alpha-pulse.vercel.app/api/eod?id=nwg",u=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),a=null,c=1.88,d=3,M=106,O=async()=>{try{let e=await fetch(F);if(!e.ok)throw new Error("Network response was not ok");return(await e.json())[0].price/100}catch(e){console.log("There was a problem with the fetch operation:",e.message)}},m=e=>e.replace(/[Â£,]/g,""),D=e=>e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),U=async()=>{a=await O(),a!==null&&(convertedSharePrice=a*M,c=convertedSharePrice*.8),b.textContent=u(convertedSharePrice),x.textContent=u(c),n.addEventListener("input",()=>{n.value=D(n.value),n.value="\u20B9"+n.value;let e=m(n.value),t=r.value;s(e,t)}),r.addEventListener("input",()=>{let e=m(n.value),t=r.value;s(e,t)}),A.forEach(e=>{e.addEventListener("change",function(){d=parseInt(this.value,10);let t=n.value,o=r.value;s(t,o)})})},s=(e,t)=>{let o=l=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),X=l=>new Intl.NumberFormat().format(l),i=e*12*d,p=Math.floor(i/c),g=Math.round(p*convertedSharePrice),v=g*(1+t/100),k=v-i;V.textContent=o(i),L.textContent=X(p),C.textContent=o(g),_.textContent=o(v),R.textContent=o(k)};U(),n.addEventListener("input",e=>{let t=e.target.reportValidity();e.target.setAttribute("aria-invalid",!t)}),console.log("live")});})();
