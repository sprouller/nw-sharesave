(()=>{document.addEventListener("DOMContentLoaded",()=>{let E="savings",I="initial",h="numberOfShares",y="sharePrice",P="value",S="increase",T="change",f="profit",N="sliderVal",w="optionPrice",n=document.getElementById(E),V=document.getElementById(I),B=document.getElementById(h),C=document.getElementById(y),L=document.getElementById(P),r=document.getElementById(S),_=document.getElementById(T),b=document.getElementById(f),k=document.getElementById(N),R=document.getElementById(w),x=document.querySelectorAll('input[name="period"]'),A="https://alpha-pulse.vercel.app/api/eod?id=nwg",d=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),a=null,c=1.88,m=3,F=106,D=async()=>{try{let e=await fetch(A);if(!e.ok)throw new Error("Network response was not ok");return(await e.json())[0].price/100}catch(e){console.log("There was a problem with the fetch operation:",e.message)}},s=e=>e.replace(/[â‚¹,]/g,""),O=e=>e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),M=async()=>{a=await D(),a!==null&&(convertedSharePrice=a*F,c=convertedSharePrice*.8),C.textContent=d(convertedSharePrice),R.textContent=d(c),n.addEventListener("input",()=>{n.value=O(n.value),n.value="\u20B9"+n.value;let e=s(n.value),t=r.value;i(e,t)}),r.addEventListener("input",()=>{let e=s(n.value),t=r.value;i(e,t)}),x.forEach(e=>{e.addEventListener("change",function(){m=parseInt(this.value,10);let t=s(n.value),o=r.value;i(t,o)})})},i=(e,t)=>{let o=u=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(u),X=u=>new Intl.NumberFormat().format(u),l=e*12*m,p=Math.floor(l/c),g=Math.round(p*convertedSharePrice),v=g*(1+t/100),U=v-l;V.textContent=o(l),B.textContent=X(p),L.textContent=o(g),_.textContent=o(v),b.textContent=o(U)};M(),n.addEventListener("input",e=>{let t=e.target.reportValidity();e.target.setAttribute("aria-invalid",!t)}),console.log("live")});})();
