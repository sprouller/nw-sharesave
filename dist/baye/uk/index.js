(()=>{document.addEventListener("DOMContentLoaded",()=>{let g='input[name="country"]',v="annualIncome",y="monthlyInvestment",I="calculate",E=document.querySelectorAll(g),o=document.getElementById(v),a=document.getElementById(y),C=document.getElementById(I),f="monthlySavings",S="trueSharesCost",p=document.getElementById(f),L=document.getElementById(S),U=0,T=32,V=42,N=47,x=0,h=31,B=32,_=33,b=53,O=43,A=48,l=0,t=0,n=0,u="england";E.forEach(e=>{e.addEventListener("change",function(){u=this.value,console.log(u)})}),C.addEventListener("click",()=>{l=parseFloat(r(o.value)),t=parseFloat(r(a.value)),u==="england"?l>15e4?n=t*(1-N/100):l>50270?n=t*(1-V/100):l>12570?n=t*(1-T/100):n=t:u==="scotland"?l>15e4?n=t*(1-A/100):l>50270?n=t*(1-O/100):l>43662?n=t*(1-b/100):l>25688?n=t*(1-_/100):l>14732?n=t*(1-B/100):l>12570?n=t*(1-h/100):n=t:n="Error";let e=Math.round(n*100)/100;M(e,t)});let r=e=>e.replace(/[Â£,]/g,""),d=e=>e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),M=(e,c)=>{let s=i=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(i);L.textContent=s(e),p.textContent=s(c-e)};o.addEventListener("input",e=>{o.value=d(o.value),o.value="\xA3"+o.value;let c=r(o.value),s=2e4,i=5e5;c<s||c>i?o.setCustomValidity(`Income must be between \xA3${s.toLocaleString()} and \xA3${i.toLocaleString()}.`):o.setCustomValidity("");let m=e.target.reportValidity();e.target.setAttribute("aria-invalid",!m)}),a.addEventListener("input",e=>{a.value=d(a.value),a.value="\xA3"+a.value;let c=r(a.value),s=5,i=150;c<s||c>i?a.setCustomValidity(`Income must be between \xA3${s.toLocaleString()} and \xA3${i.toLocaleString()}.`):a.setCustomValidity("");let m=e.target.reportValidity();e.target.setAttribute("aria-invalid",!m)})});})();
