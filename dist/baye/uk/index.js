(()=>{document.addEventListener("DOMContentLoaded",()=>{let v='input[name="country"]',y="annualIncome",I="monthlyInvestment",E="calculate",S="extraSavingsDiv",f="extraSavings",T=document.querySelectorAll(v),r=document.getElementById(y),a=document.getElementById(I),p=document.getElementById(E),d=document.getElementById(S),C=document.getElementById(f),N="monthlySavings",B="trueSharesCost",L=document.getElementById(N),_=document.getElementById(B),w=0,x=32,A=42,V=47,P=0,h=31,D=32,F=33,O=53,R=43,b=48,n=0,t=0,l=0,u="england";T.forEach(e=>{e.addEventListener("change",function(){u=this.value,console.log(u)})}),p.addEventListener("click",()=>{n=parseFloat(m(r.value)),t=parseFloat(m(a.value)),u==="england"?n>15e4?l=t*(1-V/100):n>50270?l=t*(1-A/100):n>12570?l=t*(1-x/100):l=t:u==="scotland"?n>15e4?l=t*(1-b/100):n>50270?l=t*(1-R/100):n>43662?l=t*(1-O/100):n>25688?l=t*(1-F/100):n>14732?l=t*(1-D/100):n>12570?l=t*(1-h/100):l=t:l="Error";let e=Math.round(l*100)/100,o=0;if(n>1e5&&n<125140){let c=(n-1e5)/2;if(t>0){let i=n-t,U=i>1e5?(i-1e5)/2:0;o=(c-U)*.4}}G(o),M(e,t,o)});let m=e=>e.replace(/[Â£,]/g,""),g=e=>e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),M=(e,o,s)=>{let c=i=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(i);_.textContent=c(e-s),L.textContent=c(o-e)},G=e=>{let o=s=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(s);e>0?(d.style.display="block",C.textContent=o(e)):d.style.display="none"};r.addEventListener("input",e=>{r.value=g(r.value),r.value="\xA3"+r.value}),a.addEventListener("input",e=>{a.value=g(a.value),a.value="\xA3"+a.value;let o=m(a.value),s=5,c=150;o<s||o>c?a.setCustomValidity(`Income must be between \xA3${s.toLocaleString()} and \xA3${c.toLocaleString()}.`):a.setCustomValidity("");let i=e.target.reportValidity();e.target.setAttribute("aria-invalid",!i)})});})();
