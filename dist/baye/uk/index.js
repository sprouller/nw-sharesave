(()=>{document.addEventListener("DOMContentLoaded",()=>{let d='input[name="country"]',g="annualIncome",v="monthlyInvestment",I="calculate",y=document.querySelectorAll(d),s=document.getElementById(g),o=document.getElementById(v),E=document.getElementById(I),f="monthlySavings",C="trueSharesCost",T=document.getElementById(f),p=document.getElementById(C),A=0,S=32,L=42,N=47,F=0,h=31,B=32,_=33,O=53,V=43,M=48,l=0,t=0,n=0,c="england";y.forEach(e=>{e.addEventListener("change",function(){c=this.value,console.log(c)})}),E.addEventListener("click",()=>{l=parseFloat(i(s.value)),t=parseFloat(i(o.value)),c==="england"?l>15e4?n=t*(1-N/100):l>50270?n=t*(1-L/100):l>12570?n=t*(1-S/100):n=t:c==="scotland"?l>15e4?n=t*(1-M/100):l>50270?n=t*(1-V/100):l>43662?n=t*(1-O/100):l>25688?n=t*(1-_/100):l>14732?n=t*(1-B/100):l>12570?n=t*(1-h/100):n=t:n="Error";let e=Math.round(n*100)/100;U(e,t)});let i=e=>e.replace(/[Â£,]/g,""),m=e=>e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),U=(e,u)=>{let a=r=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(r);p.textContent=a(e),T.textContent=a(u-e)};s.addEventListener("input",e=>{s.value=m(s.value),s.value="\xA3"+s.value}),o.addEventListener("input",e=>{o.value=m(o.value),o.value="\xA3"+o.value;let u=i(o.value),a=5,r=150;u<a||u>r?o.setCustomValidity(`Income must be between \xA3${a.toLocaleString()} and \xA3${r.toLocaleString()}.`):o.setCustomValidity("");let b=e.target.reportValidity();e.target.setAttribute("aria-invalid",!b)})});})();
