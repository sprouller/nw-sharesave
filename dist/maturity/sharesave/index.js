(()=>{document.addEventListener("DOMContentLoaded",()=>{let E="optionPrice",v="savings",T="totalSaved",I="numberOfShares",h="sharePrice",y="initialShareValue",P="initialProfit",S="increase",f="change",B="profit",_=document.getElementById(E),n=document.getElementById(v),w=document.getElementById(T),C=document.getElementById(I),V=document.getElementById(h),O=document.getElementById(y),N=document.getElementById(P),r=document.getElementById(S),A=document.getElementById(f),L=document.getElementById(B),b=document.querySelectorAll('input[name="period"]'),x="https://alpha-pulse.vercel.app/api/eod?id=nwg",F=t=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),c=t=>new Intl.NumberFormat().format(t),o=null,s=1.88,m=3,D=async()=>{try{let t=await fetch(x);if(!t.ok)throw new Error("Network response was not ok");return(await t.json())[0].price/100}catch(t){console.log("There was a problem with the fetch operation:",t.message)}},l=t=>t.replace(/[Â£,]/g,""),R=t=>t.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),X=async()=>{o=await D(),o!==null&&(s=o*.8,_.textContent=c(s)),V.textContent=F(o),n.addEventListener("input",()=>{n.value=R(n.value),n.value="\xA3"+n.value;let t=l(n.value),e=r.value;u(t,e)}),r.addEventListener("input",()=>{let t=l(n.value),e=r.value;u(t,e)}),b.forEach(t=>{t.addEventListener("change",function(){m=parseInt(this.value,10);let e=l(n.value),a=r.value;u(e,a)})})},u=(t,e)=>{let a=U=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(U),i=t*12*m;w.textContent=a(i);let d=Math.floor(i/s);C.textContent=c(d);let p=d*o;O.textContent=c(d);let G=p-i;N.textContent=a(G);let g=p*(1+e/100);A.textContent=a(g);let M=g-i;L.textContent=a(M)};X(),n.addEventListener("input",t=>{let e=t.target.reportValidity();t.target.setAttribute("aria-invalid",!e)}),console.log("live")});})();
