(()=>{document.addEventListener("DOMContentLoaded",()=>{let v="optionPrice",I="savings",T="totalSaved",y="numberOfShares",h="sharePrice",P="initialShareValue",f="initialProfit",S="increase",B="change",w="profit",_=document.getElementById(v),n=document.getElementById(I),C=document.getElementById(T),O=document.getElementById(y),V=document.getElementById(h),F=document.getElementById(P),N=document.getElementById(f),o=document.getElementById(S),b=document.getElementById(B),x=document.getElementById(w),A=document.querySelectorAll('input[name="period"]'),D="https://alpha-pulse.vercel.app/api/eod?id=nwg",m=t=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),k=t=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:4,maximumFractionDigits:4}).format(t),p=t=>new Intl.NumberFormat().format(t),c=null,s=1.88,r=3,L=async()=>{try{let t=await fetch(D);if(!t.ok)throw new Error("Network response was not ok");return(await t.json())[0].price/100}catch(t){console.log("There was a problem with the fetch operation:",t.message)}},l=t=>t.replace(/[Â£,]/g,""),G=t=>t.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),R=async()=>{c=await L(),V.textContent=m(c),n.addEventListener("input",()=>{n.value=G(n.value),n.value="\xA3"+n.value;let t=l(n.value),e=o.value;u(t,e)}),o.addEventListener("input",()=>{let t=l(n.value),e=o.value;u(t,e)}),A.forEach(t=>{t.addEventListener("change",function(){r=parseInt(this.value,10);let e=l(n.value),a=o.value;u(e,a),_.textContent=m(s)})})},u=(t,e)=>{let a=U=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(U);r===3?s=1.7829:r===5&&(bonus=2.2699);let i=t*12*r;C.textContent=a(i);let d=Math.floor(i/s);O.textContent=p(d);let g=d*c;F.textContent=p(d);let X=g-i;N.textContent=a(X);let E=g*(1+e/100);b.textContent=a(E);let M=E-i;x.textContent=a(M)};R(),n.addEventListener("input",t=>{let e=t.target.reportValidity();t.target.setAttribute("aria-invalid",!e)}),console.log("live")});})();
