(()=>{document.addEventListener("DOMContentLoaded",()=>{let E="optionPrice",v="savings",I="totalSaved",T="numberOfShares",y="sharePrice",P="initialShareValue",h="initialProfit",f="increase",S="change",w="profit",d=document.getElementById(E),a=document.getElementById(v),B=document.getElementById(I),O=document.getElementById(T),_=document.getElementById(y),C=document.getElementById(P),V=document.getElementById(h),r=document.getElementById(f),F=document.getElementById(S),N=document.getElementById(w),x=document.querySelectorAll('input[name="period"]'),b="https://alpha-pulse.vercel.app/api/eod?id=nwg",A=t=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),m=t=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:4,maximumFractionDigits:4}).format(t),D=t=>new Intl.NumberFormat().format(t),c=null,i=3,L=async()=>{try{let t=await fetch(b);if(!t.ok)throw new Error("Network response was not ok");return(await t.json())[0].price/100}catch(t){console.log("There was a problem with the fetch operation:",t.message)}},s=t=>t.replace(/[Â£,]/g,""),G=t=>t.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),R=async()=>{c=await L(),_.textContent=A(c);let t=1.7829;d.textContent=m(t),a.addEventListener("input",()=>{a.value=G(a.value),a.value="\xA3"+a.value;let n=s(a.value),e=r.value;l(n,e)}),r.addEventListener("input",()=>{let n=s(a.value),e=r.value;l(n,e)}),x.forEach(n=>{n.addEventListener("change",function(){i=parseInt(this.value,10);let e=s(a.value),o=r.value;l(e,o),d.textContent=m(t)})})},l=(t,n)=>{let e=U=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(U);i===3?nwOptionPrice=1.7829:i===5&&(nwOptionPrice=2.2699);let o=t*12*i;B.textContent=e(o);let p=Math.floor(o/nwOptionPrice);O.textContent=D(p);let u=p*c;C.textContent=e(u);let X=u-o;V.textContent=e(X);let g=u*(1+n/100);F.textContent=e(g);let M=g-o;N.textContent=e(M)};R(),a.addEventListener("input",t=>{let n=t.target.reportValidity();t.target.setAttribute("aria-invalid",!n)}),console.log("live")});})();
