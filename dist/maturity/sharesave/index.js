(()=>{document.addEventListener("DOMContentLoaded",()=>{let v="optionPrice",T="savings",I="totalSaved",h="numberOfShares",y="sharePrice",P="initialShareValue",f="initialProfit",S="increase",B="change",_="profit",w=document.getElementById(v),n=document.getElementById(T),C=document.getElementById(I),V=document.getElementById(h),O=document.getElementById(y),N=document.getElementById(P),b=document.getElementById(f),o=document.getElementById(S),A=document.getElementById(B),L=document.getElementById(_),x=document.querySelectorAll('input[name="period"]'),F="https://alpha-pulse.vercel.app/api/eod?id=nwg",m=t=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),p=t=>new Intl.NumberFormat().format(t),c=null,s=1.88,r=3,D=async()=>{try{let t=await fetch(F);if(!t.ok)throw new Error("Network response was not ok");return(await t.json())[0].price/100}catch(t){console.log("There was a problem with the fetch operation:",t.message)}},l=t=>t.replace(/[Â£,]/g,""),R=t=>t.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),X=async()=>{c=await D(),O.textContent=m(c),n.addEventListener("input",()=>{n.value=R(n.value),n.value="\xA3"+n.value;let t=l(n.value),e=o.value;u(t,e)}),o.addEventListener("input",()=>{let t=l(n.value),e=o.value;u(t,e)}),x.forEach(t=>{t.addEventListener("change",function(){r=parseInt(this.value,10);let e=l(n.value),a=o.value;u(e,a)})})},u=(t,e)=>{let a=U=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(U);r===3?s=1.7829:r===5&&(bonus=2.2699),w.textContent=m(s);let i=t*12*r;C.textContent=a(i);let d=Math.floor(i/s);V.textContent=p(d);let g=d*c;N.textContent=p(d);let G=g-i;b.textContent=a(G);let E=g*(1+e/100);A.textContent=a(E);let M=E-i;L.textContent=a(M)};X(),n.addEventListener("input",t=>{let e=t.target.reportValidity();t.target.setAttribute("aria-invalid",!e)}),console.log("live")});})();
