(()=>{document.addEventListener("DOMContentLoaded",()=>{let v="optionPrice",I="savings",T="totalSaved",y="numberOfShares",h="sharePrice",P="initialShareValue",f="initialProfit",S="increase",B="change",w="profit",m=document.getElementById(v),n=document.getElementById(I),_=document.getElementById(T),C=document.getElementById(y),O=document.getElementById(h),V=document.getElementById(P),F=document.getElementById(f),r=document.getElementById(S),N=document.getElementById(B),x=document.getElementById(w),b=document.querySelectorAll('input[name="period"]'),A="https://alpha-pulse.vercel.app/api/eod?id=nwg",D=t=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),p=t=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:4,maximumFractionDigits:4}).format(t),L=t=>new Intl.NumberFormat().format(t),s=null,o=1.88,i=3,G=async()=>{try{let t=await fetch(A);if(!t.ok)throw new Error("Network response was not ok");return(await t.json())[0].price/100}catch(t){console.log("There was a problem with the fetch operation:",t.message)}},l=t=>t.replace(/[Â£,]/g,""),R=t=>t.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),X=async()=>{s=await G(),O.textContent=D(s),m.textContent=p(o),n.addEventListener("input",()=>{n.value=R(n.value),n.value="\xA3"+n.value;let t=l(n.value),e=r.value;u(t,e)}),r.addEventListener("input",()=>{let t=l(n.value),e=r.value;u(t,e)}),b.forEach(t=>{t.addEventListener("change",function(){i=parseInt(this.value,10);let e=l(n.value),a=r.value;u(e,a),m.textContent=p(o)})})},u=(t,e)=>{let a=k=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(k);i===3?o=1.7829:i===5&&(o=2.2699);let c=t*12*i;_.textContent=a(c);let g=Math.floor(c/o);C.textContent=L(g);let d=g*s;V.textContent=a(d);let M=d-c;F.textContent=a(M);let E=d*(1+e/100);N.textContent=a(E);let U=E-c;x.textContent=a(U)};X(),n.addEventListener("input",t=>{let e=t.target.reportValidity();t.target.setAttribute("aria-invalid",!e)}),console.log("live")});})();
