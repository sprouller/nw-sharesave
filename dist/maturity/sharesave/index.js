(()=>{document.addEventListener("DOMContentLoaded",()=>{let g="optionPrice",T="savings",I="totalSaved",v="numberOfShares",h="sharePrice",y="initialShareValue",P="initialProfit",f="increase",S="change",B="profit",U=document.getElementById(g),n=document.getElementById(T),_=document.getElementById(I),b=document.getElementById(v),w=document.getElementById(h),C=document.getElementById(y),O=document.getElementById(P),a=document.getElementById(f),N=document.getElementById(S),V=document.getElementById(B),A=document.querySelectorAll('input[name="period"]'),L="https://alpha-pulse.vercel.app/api/eod?id=nwg",F=e=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),d=e=>new Intl.NumberFormat().format(e),c=null,m=1.88,r=3,x=async()=>{try{let e=await fetch(L);if(!e.ok)throw new Error("Network response was not ok");return(await e.json())[0].price/100}catch(e){console.log("There was a problem with the fetch operation:",e.message)}},s=e=>e.replace(/[Â£,]/g,""),D=e=>e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),R=async()=>{c=await x(),w.textContent=F(c),n.addEventListener("input",()=>{n.value=D(n.value),n.value="\xA3"+n.value;let e=s(n.value),t=a.value;l(e,t)}),a.addEventListener("input",()=>{let e=s(n.value),t=a.value;l(e,t)}),A.forEach(e=>{e.addEventListener("change",function(){r=parseInt(this.value,10);let t=s(n.value),o=a.value;l(t,o)})})},l=(e,t)=>{let o=G=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(G);r===3?(m=1.7829,bonusMultiplier=bonus*e):r===5&&(bonus=2.2699,bonusMultiplier=bonus*e);let i=e*12*r;_.textContent=o(i);let u=Math.floor(i/m);b.textContent=d(u);let p=u*c;C.textContent=d(u);let X=p-i;O.textContent=o(X);let E=p*(1+t/100);N.textContent=o(E);let M=E-i;V.textContent=o(M)};R(),n.addEventListener("input",e=>{let t=e.target.reportValidity();e.target.setAttribute("aria-invalid",!t)}),console.log("live")});})();
